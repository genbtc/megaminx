cmake_minimum_required(VERSION 3.4)
# by genBTC 2017, project setup on CMake on Windows 64 using MSYS2/MingW64/G++ compilers. Change as needed.
project(MegaMinx2)
# Target OS Name (also makes black console window go away)
set(CMAKE_SYSTEM_NAME Windows)
# Turn on C++ 17 and debug flags.
set(CMAKE_C_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} -std=c++1z -DDEBUG=1")
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -std=c++1z -DDEBUG=1")
#Little routine to detect Current CPUs.
include(ProcessorCount)
ProcessorCount(NumCPUS)
message("detected number of processors: " ${NumCPUS})
# need GLUT (or freeglut)
find_package(GLUT REQUIRED)
if(NOT GLUT_FOUND)
    message(ERROR " - GLUT not found!")
endif(NOT GLUT_FOUND)
# need OpenGL (or Xmesa)
find_package(OpenGL REQUIRED)
if(NOT OPENGL_FOUND) #OPENGL_XMESA_FOUND
    message(ERROR " - OPENGL not found!")
endif(NOT OPENGL_FOUND)
# need GLU of some sort (glu32 from openGL most likely)
if(NOT OPENGL_GLU_FOUND)
    message(ERROR " - OPENGL GLU not found!")
endif(NOT OPENGL_GLU_FOUND)
#Set Link libraries (Auto)
set(LIBRARIES_FROM_REFERENCES "${GLUT_LIBRARIES};${OPENGL_gl_LIBRARY};${OPENGL_glu_LIBRARY}")
#Set Link Libraries (Manually)
#set(LIBRARIES_FROM_REFERENCES "-lfreeglut;-lopengl32;-lglu32;")
#Set EXE by listing all source files, and the Resource.rc (icon)
add_executable(MegaMinx2 WIN32 common_physics/camera.cpp common_physics/opengl.cpp common_physics/raytri.cpp engine/center.cpp engine/corner.cpp engine/edge.cpp engine/face.cpp engine/megaminx.cpp engine/utils.cpp main.cpp Res.rc)
#Make Exe, go!
target_link_libraries(MegaMinx2 "${LIBRARIES_FROM_REFERENCES}")